<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>ìˆ«ì ì•¼êµ¬ ê²Œì„</title>
  </head>

  </form>
  <style>
    form {
      margin-left: 600px;
    }
    div {
      margin-left: 600px;
    }
  </style>

  <body bgcolor="#d4f6b7">
    <h2 align="center" style="color: seagreen; font-size: 70px">
      ìˆ«ì ì•¼êµ¬ ê²Œì„
    </h2>
    <p>
      <marquee behavior="scrol">
        ì¤‘ë³µë˜ì§€ ì•ŠëŠ” ë„¤ ìë¦¬ ìˆ˜ë¥¼ ì…ë ¥í•˜ì„¸ìš”
      </marquee>
    </p>
    <p>
      <marquee behavior="scrol">
        ìë¦¬ì™€ ìˆ˜ë¥¼ ë§íˆë©´ ìŠ¤íŠ¸ë¼ì´í¬, ìˆ˜ë§Œ ë§íˆë©´ ë³¼ë¡œ í‘œì‹œë©ë‹ˆë‹¤. ìˆ«ìë¥¼ ëª¨ë‘
        ë§íˆë©´ í™ˆëŸ°!
      </marquee>
    </p>
    <p>
      <marquee bgColor="lightblue" style="color: rgb(11, 6, 90)">
        ê¸°íšŒëŠ” ì´ 10ë²ˆ ì£¼ì–´ì§‘ë‹ˆë‹¤!
      </marquee>
    </p>
    <form action="reset">
      <input
        type="button"
        value="reset"
        style="
          color: seagreen;
          background-color: rgb(218, 250, 222);
          border-color: rgb(80, 116, 95);
        "
        onclick="window.location.reload();alert('ê²Œì„ì´ ë¦¬ì…‹ë©ë‹ˆë‹¤!')"
      />
      <form action="hint">
        <input
          type="button"
          value="hint"
          style="
            color: seagreen;
            background-color: rgb(218, 250, 222);
            border-color: rgb(80, 116, 95);
          "
          onclick="alert(`${hintNumbers} ì´ ìˆ«ìì¤‘ì— ë„¤ê°œê°€ ì •ë‹µì…ë‹ˆë‹¤.`)"
        />
      </form>
    <script>
      // 1. í™”ë©´êµ¬ì„±

      // ì „ì†¡ í¼
      let form = document.createElement("form");
      document.body.append(form);
      // ì…ë ¥ì°½
      let input = document.createElement("input");
      input.maxLength = 4;
      input.minLength = 4;
      form.append(input);
      // ì…ë ¥ ë²„íŠ¼
      let btn = document.createElement("button");
      btn.textContent = "ì…ë ¥";
      btn.style.color = "Seagreen";
      // ì…ë ¥ë²„íŠ¼ë„ í†µì¼í•´ì„œ ë°”ê¿”ì£¼ê³ ì‹¶ì€ë° ë°”ê¾¸ëŠ” ë²•ì„ ëª¨ë¦„.....
      // btn.style.background.color = "rgb(218, 250, 222)";
      // btn.style.border.color = "rgb(80, 116, 95)";

      form.append(btn);
      // ë¦¬ì…‹ ë²„íŠ¼

      // ê²°ê³¼ì¡°íšŒ
      let result = document.createElement("div");
      document.body.append(result);

      // 2.ìˆ«ìë½‘ê¸° í•¨ìˆ˜ ì„ ì–¸ë¶€
      // ì´í•˜ ì½”ë“œ ì‘ì„±
      let numberList;
      let answerArray;
      let hint; 
      let hintNumbers;

      function makeAnswer() {
        numberList = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];
        answerArray = [];
        for (let i = 0; i < 4; i++) {
          let picked = [];
          picked = numberList.splice(
            Math.floor(Math.random() * (10 - i)),
            1
          )[0];
          answerArray.push(picked);
        }
      }
      makeAnswer();
      console.log(answerArray);
      

      function showFinalResult() {
        result.textContent = "ğŸ‰í™ˆëŸ°!!ğŸ¥³ğŸ‰";
      }
      function failResult() {
        result.textContent = ` íšŸìˆ˜ ì´ˆê³¼! ì •ë‹µì€ ${answerArray}ì…ë‹ˆë‹¤.`;
      }
      //íŒíŠ¸ í•¨ìˆ˜ ë§Œë“¤ê¸°
      let clueNum = numberList;
       hint = []
      for (let i = 0; i < 1; i++) {
        let clue = [];
        clue = clueNum.splice(
          Math.floor(Math.random() * (6 - i)),
          1
        )[0];
        hint.push(clue);
      }
      console.log(hint)

      hintNumbers = hint.concat(answerArray)
      hintNumbers.sort()
      console.log(hintNumbers)
      hintNumbers.reverse()
    

      let nGuesses = 0;

      // 3.ì°¸ì—¬ìê°€ ì…ë ¥í•œ ìˆ«ì ì „ì†¡ë¶€
      form.addEventListener("submit", function (e) {
        e.preventDefault();

        let answer = input.value;
        
        //ì¤‘ë³µê²€ì‚¬ìš© í•¨ìˆ˜
        let tries = [];
        function checkInput(input) {
          for (i = 0; i <= 3; i++) if(answer[i] === answer[i + 1]) {
            alert("ì¤‘ë³µëœ ìˆ«ì ì…ë‹ˆë‹¤!");
          } else if(answer[i] === answer[i + 2]) {
            alert("ì¤‘ë³µëœ ìˆ«ì ì…ë‹ˆë‹¤!");
          } else if(answer[i] === answer[i + 3]) {
            alert("ì¤‘ë³µëœ ìˆ«ì ì…ë‹ˆë‹¤!");
          }
        }
         checkInput()
        if (input.value === answerArray.join("")) {
          showFinalResult();
          input.value = "";
          input.focus();
          makeAnswer();
          console.log(answerArray);
          nGuesses = 0;
        } else {
          // í‹€ë¦¬ë©´ ìŠ¤íŠ¸ë¼ì´í¬ í™ˆëŸ°
          let attemptArray = answer.split("");
          let nBalls = 0;
          let nStrikes = 0;
          nGuesses++;


          if (nGuesses >= 10) {
            failResult();
            input.value = "";
            input.focus();
            // ë‹¤ìŒë¬¸ì œ
            makeAnswer();
            console.log("ë‹¤ìŒë¬¸ì œ" + answerArray);
            nGuesses = 0;
          } else {
            for (let i = 0; i < 4; i++) {
              if (Number(attemptArray[i]) === answerArray[i]) {
                // ê°™ì€ ìë¦¬ë©´ ìŠ¤íŠ¸ë¼ìŒ
                nStrikes++;
              } else if (answerArray.indexOf(Number(attemptArray[i])) > -1) {
                nBalls++;
              }
            }
            result.textContent = `${nStrikes} ìŠ¤íŠ¸ë¼ì´í¬, ${nBalls} ë³¼ ì…ë‹ˆë‹¤.
                    ${10 - nGuesses} íšŒ ë‚¨ì•˜ìŠµë‹ˆë‹¤!`;
            input.value = "";
            input.focus();
          }
        }
      });
    </script>
  </body>
</html>